<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required Meta -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/form.css">

    <title>Recruitment Form</title>
</head>

<body>
    <div class="recruitment-form">

        <div class="visualization-side">
            <div class="logo">
                <img src="/images/asme-logo.png" alt="">
            </div>

            <div class="slogan">
                <p>Join Us Now</p>

                <div class="circle">
                    <h1><span>Gear</span><br /><span>The</span><br /><span>World</span></h1>
                    <img src="/images/gear_the_world.png" alt="">
                </div>

            </div>
        </div>

        <div class="application-side">
            <form id="form">
                <div class="input-field">
                    <label>Full Name</label>
                    <input type="text" required name="full-name" id="full-name" class="input">
                </div>

                <div class="input-field">
                    <label>Phone Number</label>
                    <input type="text" required name="phone-number" id="phone-number" class="input">
                </div>

                <div class="input-field">
                    <label>Email</label>
                    <input type="email" required name="email" id="email" class="input">
                </div>

                <div class="mulitple-input">
                    <div class="input-field">
                        <label>University</label>
                        <input type="text" required name="university" id="university" class="input">
                    </div>

                    <div class="input-field">
                        <label>Faculty</label>
                        <input type="text" required name="faculty" id="faculty" class="input">
                    </div>
                </div>

                <div class="mulitple-input">
                    <div class="input-field">
                        <label>Department</label>
                        <input type="text" required name="department" id="department" class="input">
                    </div>

                    <div class="input-field">
                        <label>Major</label>
                        <input type="text" required name="major" id="major" class="input">
                    </div>

                    <div class="input-field">
                        <label>Graduation Year</label>
                        <select class="input" name="graduation-year" id="graduation-year" required>
                            <option value="">Select a year</option>
                            <option>2024</option>
                            <option>2025</option>
                            <option>2026</option>
                            <option>2027</option>
                        </select>
                    </div>
                </div>

                <div class="input-field">
                    <label>Position</label>
                    <input type="text" required name="position" id="position" class="input">
                </div>

                <div class="input-field">
                    <label>Previous Experience</label>
                    <textarea rows="4" placeholder="" name="previous-experience" id="previous-experience"
                        class="input"></textarea>
                </div>

                <div class="input-field">
                    <label>Comment</label>
                    <textarea rows="4" placeholder="" name="comment" id="comment" class="input"></textarea>
                </div>

                <div class="submit">
                    <button id="submit"> Submit <img src="/images/gear.png"></button>
                </div>

            </form>
        </div>
    </div>

    <!-- axios -->
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>

    <!-- JS Implementation-->
    <!-- <script src="../static/js/form.js"></script> -->
    <script>
        var inputs = document.querySelectorAll(".input");
        const form = document.querySelector("#form");
        const fullName = document.querySelector("#full-name");
        const phoneNumber = document.querySelector("#phone-number");
        const email = document.querySelector("#email");
        const university = document.querySelector("#university");
        const faculty = document.querySelector("#faculty");
        const department = document.querySelector("#department");
        const major = document.querySelector("#major");
        const graduationYear = document.querySelector("#graduation-year");
        const position = document.querySelector("#position");
        const previousExperience = document.querySelector("#previous-experience");
        const comment = document.querySelector("#comment");
        const submitButton = document.querySelector("#submit");

        submitButton.addEventListener('click', (event) => {

            event.preventDefault();

            axios.post(`/api/v1/form`, {

                name: fullName.value,
                phoneNumber: phoneNumber.value,
                email: email.value,
                university: university.value,
                faculty: faculty.value,
                department: department.value,
                major: major.value,
                graduationYear: graduationYear.value,
                position: position.value,
                previousExperience: previousExperience.value,
                comment: comment.value,

            }).then((res) => {

                const data = res.data
                console.log(data)
                window.location.href = '../templates/form-succession.html';

            }).catch((error) => {
                console.error(error.response.status);
                console.error(error.response.statusText);
                console.error(error.response.data);
            });
        });

        for (let input of inputs) {

            input.addEventListener("input", async () => {
                const formData = new FormData(form); // Get form data

                if (input.value !== "") {
                    input.style.border = "solid 2px rgba(15, 90, 170,0.7)";
                }

                else {
                    input.style.border = "solid 2px rgb(182, 182, 182)";
                }
            });

            input.addEventListener("invalid", () => {
                input.style.border = "solid 2px rgba(211, 25, 15, 0.6)";
            });

        }
    </script>
</body>

</html>